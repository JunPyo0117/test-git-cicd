# 프로젝트 아키텍처

이 문서는 프로젝트의 전체 아키텍처와 각 컴포넌트의 역할을 설명합니다.

## 🏗️ 전체 아키텍처

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│     GitHub      │    │   Git Actions   │    │     Docker      │
│   (소스코드)     │───▶│   (CI/CD)       │───▶│   (이미지 빌드)  │
└─────────────────┘    └─────────────────┘    └─────────────────┘
                                                           │
                                                           ▼
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Route 53      │    │   CloudFront    │    │   ALB (퍼블릭)   │
│   (DNS)         │───▶│   (CDN)         │───▶│   (로드밸런서)   │
└─────────────────┘    └─────────────────┘    └─────────────────┘
                                                           │
                                                           ▼
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   AWS ECR       │    │   AWS EKS       │    │   AWS RDS       │
│   (이미지 저장)  │───▶│   (컨테이너)     │───▶│   (데이터베이스) │
└─────────────────┘    └─────────────────┘    └─────────────────┘
                              │
                              ▼
                       ┌─────────────────┐
                       │   React +       │
                       │   NestJS        │
                       │   (애플리케이션)  │
                       └─────────────────┘
```

## 🔄 상세 흐름

### 1. CI/CD 파이프라인 (좌측)
- **GitHub**: 소스 코드 저장소
- **GitHub Actions**: 자동화된 CI/CD 워크플로우
- **Docker**: 컨테이너 이미지 빌드
- **AWS ECR**: Docker 이미지 저장소

### 2. 사용자 요청 처리 (우측)
- **사용자**: 웹 애플리케이션 접근
- **Route 53**: DNS 해석 및 요청 라우팅
- **CloudFront**: CDN을 통한 콘텐츠 전송 최적화
- **ALB**: 퍼블릭 서브넷에 위치한 로드 밸런서
- **EKS**: Kubernetes 클러스터에서 애플리케이션 실행
- **RDS**: PostgreSQL 데이터베이스

## 🏢 AWS 서비스별 역할

### Route 53
- **역할**: DNS 관리 및 사용자 요청 라우팅
- **위치**: 퍼블릭 (인터넷 접근 가능)
- **설정**: 프론트엔드와 백엔드 API를 위한 별도 레코드

### CloudFront
- **역할**: CDN을 통한 콘텐츠 전송 최적화
- **위치**: 퍼블릭 (글로벌 엣지 로케이션)
- **기능**: 캐싱, 압축, HTTPS 강제

### Application Load Balancer (ALB)
- **역할**: 트래픽 분산 및 백엔드 서비스 로드 밸런싱
- **위치**: 퍼블릭 서브넷
- **기능**: 헬스 체크, SSL 종료, 세션 고정

### EKS (Elastic Kubernetes Service)
- **역할**: 컨테이너화된 애플리케이션 실행
- **위치**: 프라이빗 서브넷 (노드 그룹)
- **컴포넌트**:
  - React (프론트엔드)
  - NestJS (백엔드)

### RDS (Relational Database Service)
- **역할**: PostgreSQL 데이터베이스
- **위치**: 프라이빗 서브넷
- **보안**: 보안 그룹을 통한 접근 제어

### ECR (Elastic Container Registry)
- **역할**: Docker 이미지 저장소
- **위치**: AWS 관리형 서비스
- **기능**: 이미지 버전 관리, 보안 스캔

### S3
- **역할**: 프론트엔드 정적 파일 호스팅
- **위치**: AWS 관리형 서비스
- **접근**: CloudFront를 통해서만 접근 가능

## 🔒 보안 아키텍처

### 네트워크 보안
- **퍼블릭 서브넷**: ALB, NAT Gateway
- **프라이빗 서브넷**: EKS 노드, RDS
- **보안 그룹**: 서비스별 세분화된 접근 제어

### 데이터 보안
- **암호화**: 저장 시 및 전송 시 암호화
- **백업**: RDS 자동 백업
- **접근 제어**: IAM 역할 기반 권한 관리

### 애플리케이션 보안
- **HTTPS**: 모든 외부 통신에서 HTTPS 강제
- **CORS**: 적절한 CORS 설정
- **헬스 체크**: ALB를 통한 애플리케이션 상태 모니터링

## 📊 모니터링 및 로깅

### AWS CloudWatch
- **메트릭**: EKS, RDS, ALB 메트릭 수집
- **로그**: 애플리케이션 로그 수집
- **알람**: 임계값 기반 알림 설정

### GitHub Actions
- **CI/CD 모니터링**: 빌드 및 배포 상태 추적
- **로그**: 각 단계별 상세 로그

## 🚀 확장성

### 수평 확장
- **EKS**: Pod 자동 스케일링
- **ALB**: 트래픽 기반 로드 밸런싱
- **CloudFront**: 글로벌 엣지 로케이션

### 수직 확장
- **RDS**: 인스턴스 타입 변경
- **EKS**: 노드 타입 변경

## 💰 비용 최적화

### 리소스 최적화
- **EKS**: Spot 인스턴스 사용 가능
- **RDS**: 예약 인스턴스 사용 가능
- **CloudFront**: 캐싱을 통한 원본 서버 부하 감소

### 모니터링
- **AWS Cost Explorer**: 비용 추적 및 분석
- **태그**: 리소스별 비용 할당
